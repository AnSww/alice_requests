from flask import Flask, request, jsonify

app = Flask(__name__)

# Обработчик для запросов от Алисы
@app.route('/alice', methods=['POST'])
def alice_skill():
    data = request.json  # Получаем данные от Алисы в формате JSON
    user_command = data['request']['command']  # Команда, сказанная пользователем

    # Простая логика обработки команды
    if 'расскажи библию на японском' in user_command:
        response_text = '1初めに言があった。言は神と共にあった。言は神であった。 2この言は、初めに神と共にあった。 3万物は言によって成った。成ったもので、言によらずに成ったものは何一つなかった。 4言の内に命があった。命は人間を照らす光であった。 5光は暗闇の中で輝いている。暗闇は光を理解しなかった。6神から遣わされた一人の人がいた。その名はヨハネである。 7彼は証しをするために来た。光について証しをするため、また、すべての人が彼によって信じるようになるためである。 8彼は光ではなく、光について証しをするために来た。 9その光は、まことの光で、世に来てすべての人を照らすのである。 10言は世にあった。世は言によって成ったが、世は言を認めなかった。 11言は、自分の民のところへ来たが、民は受け入れなかった。 12しかし、言は、自分を受け入れた人、その名を信じる人々には神の子となる資格を与えた。 13この人々は、血によってではなく、肉の欲によってではなく、人の欲によってでもなく、神によって生まれたのである。14言は肉となって、わたしたちの間に宿られた。わたしたちはその栄光を見た。それは父の独り子としての栄光であって、恵みと真理とに満ちていた。 15ヨハネは、この方について証しをし、声を張り上げて言った。「『わたしの後から来られる方は、わたしより優れている。わたしよりも先におられたからである』とわたしが言ったのは、この方のことである。」 16わたしたちは皆、この方の満ちあふれる豊かさの中から、恵みの上に、更に恵みを受けた。 17律法はモーセを通して与えられたが、恵みと真理はイエス・キリストを通して現れたからである。'
    elif 'время' in user_command:
        response_text = 'Сейчас 12 часов дня.'
    else:
        response_text = 'Я не знаю такой команды.'

    # Формируем ответ, который Алиса озвучит
    return jsonify({
        'response': {
            'text': response_text,
            'end_session': True  # Если False, навык продолжает слушать
        },
        'version': '1.0'
    })

if __name__ == '__main__':
    app.run(port=5000)
